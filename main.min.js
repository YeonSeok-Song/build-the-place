!function(){"use strict";var e,t={8363:function(e,t,n){var r=n(9526),o=n(4470),a=function(){return r.createElement("div",{className:"mb-2"},r.createElement("button",{onClick:function(e){e.preventDefault(),window.location.href="/edit"}},"Edit"))},i=function(){return r.createElement("div",null,r.createElement("input",{placeholder:"URL"}),r.createElement("button",null,"Join"))},l=function(){return r.createElement("div",null,r.createElement(a,null),r.createElement(i,null))},s=(n(4994),n(6364),n(6632),n(853),n(1928),n(4883),n(5007),n(8995),n(8821),n(4845),n(9275),n(6075)),c=(n(5862),n(5727),n(174),n(7838),n(7345));function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n,r,o,a,i){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.camera=t,this.floor=a,this.clock=new s.SUY,this.controls=new c.q(t,n),this.mouse=new s.FM8,this.raycaster=new s.iMs,this.canvas=r,this.selectMesh=null,this.clickPoint=new s.FM8,this.group=o,this.keys=[],this.editMode=!0,this.isPressed=!1,this.positionOption=!1,this.isRightButton=!1,this.cb=i,this.cameraCenterPos=null,this.controls.domElement.addEventListener("click",(function(){l.editMode||l.controls.lock()})),this.controls.addEventListener("lock",(function(){})),this.controls.addEventListener("unlock",(function(){})),window.addEventListener("keydown",(function(e){l.keys[e.code]=!0})),window.addEventListener("keyup",(function(e){delete l.keys[e.code]})),this.canvas.addEventListener("contextmenu",(function(e){e.preventDefault()})),this.canvas.addEventListener("mousedown",(function(e){l.editMode&&("which"in(e=e||window.event)?l.isRightButton=3===e.which:"button"in e&&(l.isRightButton=2===e.button),l.isPressed=!0,l.calculateMousePosition(e),l.clickPoint.x=e.clientX,l.clickPoint.y=e.clientY),l.selectMesh&&(l.selectMesh=null)})),this.canvas.addEventListener("mouseup",(function(){l.editMode&&(l.isPressed=!1,!l.isRightButton&&l.selectMesh&&l.endMovePosition(l.selectMesh.mesh))})),this.canvas.addEventListener("mousemove",(function(e){l.editMode&&(l.calculateMousePosition(e),l.isPressed&&!l.isRightButton&&l.selectMesh&&l.movePosition(l.selectMesh.mesh))})),this.canvas.addEventListener("wheel",(function(e){e.deltaY>0?l.unZoom():l.zoom()}))}var t,n,r;return t=e,(n=[{key:"setColorRed",value:function(e,t){var n=this.floor.blockGroup.getObjectByName("".concat(e,"-").concat(t));n&&n.material.color.set("red")}},{key:"setColorBlue",value:function(e,t){var n=this.floor.blockGroup.getObjectByName("".concat(e,"-").concat(t));n&&n.material.color.set("blue")}},{key:"setColorWhite",value:function(e,t){var n=this.floor.blockGroup.getObjectByName("".concat(e,"-").concat(t));n&&n.material.color.set("white")}},{key:"changeFloorColor",value:function(e){var t=e.scale.x,n=e.scale.z,r=e.position.x,o=e.position.z;if(Number.isInteger(r))for(var a=0;a<n;a++){this.setColorBlue(r,o+a-(n/2-.5));for(var i=0;i<t/2;i++)this.setColorBlue(r+i,o+a-(n/2-.5)),this.setColorBlue(r-i,o+a-(n/2-.5))}else for(var l=0;l<n;l++)for(var s=0;s<t/2;s++)this.setColorBlue(r+s+.5,o+l-(n/2-.5)),this.setColorBlue(r-s-.5,o+l-(n/2-.5))}},{key:"revertFloorColor",value:function(e){var t=e.scale.x,n=e.scale.z,r=e.position.x,o=e.position.z;if(Number.isInteger(r))for(var a=0;a<n;a++){this.setColorWhite(r,o+a);for(var i=0;i<t/2;i++)this.setColorWhite(r+i,o+a-(n/2-.5)),this.setColorWhite(r-i,o+a-(n/2-.5))}else for(var l=0;l<n;l++)for(var s=0;s<t/2;s++)this.setColorWhite(r+s+.5,o+l-(n/2-.5)),this.setColorWhite(r-s-.5,o+l-(n/2-.5))}},{key:"dropToPosPossible",value:function(){}},{key:"movePosition",value:function(e){if(this.selectMesh.mesh.position.y=2,this.revertFloorColor(e),e.scale.x%2==0){var t=Math.round(this.raycaster.ray.origin.x)+.5;this.movePossibleX(t)&&(e.position.x=t)}else{var n=Math.round(this.raycaster.ray.origin.x);this.movePossibleX(n)&&(e.position.x=n)}if(e.scale.z%2==0){var r=Math.round(this.raycaster.ray.origin.z)+.5;this.movePossibleY(r)&&(e.position.z=r)}else{var o=Math.round(this.raycaster.ray.origin.z);this.movePossibleY(o)&&(e.position.z=o)}this.changeFloorColor(e)}},{key:"movePossibleX",value:function(e){return!(e>=this.floor.getSize().x||e<0)}},{key:"movePossibleY",value:function(e){return!(e>=this.floor.getSize().y||e<0)}},{key:"endMovePosition",value:function(e){e.position.y=.5,this.revertFloorColor(e),"wall"===this.selectMesh.mesh.name.split("#")[0]&&(this.selectMesh.setRotatePos(),this.selectMesh.updatePosToRotate())}},{key:"zoom",value:function(){this.camera.zoom+=.01,this.camera.updateProjectionMatrix()}},{key:"unZoom",value:function(){this.camera.zoom-=.01,this.camera.updateProjectionMatrix()}},{key:"calculateMousePosition",value:function(e){this.mouse.x=e.clientX/this.canvas.clientWidth*2-1,this.mouse.y=-(e.clientY/this.canvas.clientHeight*2-1)}},{key:"rayCasting",value:function(e){this.raycaster.setFromCamera(this.mouse,this.camera),this.checkIntersects(e)}},{key:"checkIntersects",value:function(e){var t=[];for(var n in e)t.push(e[n].mesh);var r=this.raycaster.intersectObjects(t);if(!this.selectMesh&&r.length>0){var o,a=u(r);try{for(a.s();!(o=a.n()).done;){for(var i=o.value.object;"renderGroup"!==i.parent.name;)i=i.parent;this.selectMesh=e[i.name.split("#")[1]],this.cb(this.selectMesh);break}}catch(e){a.e(e)}finally{a.f()}}}},{key:"rotateCamera",value:function(e){this.camera.rotation.y+=e}},{key:"setModeToggle",value:function(){this.editMode=!this.editMode}},{key:"setCameraCenterPos",value:function(e){!e||e.x===this.cameraCenterPos.x&&e.y===this.cameraCenterPos.y||(this.cameraCenterPos=new s.FM8(e.x,e.y))}},{key:"updateController",value:function(e){var t=this.clock.getDelta();this.isPressed&&this.rayCasting(e),this.keys.KeyW&&this.controls.moveForward(.1),this.keys.KeyA&&this.controls.moveRight(-.1),this.keys.KeyS&&this.controls.moveForward(-.1),this.keys.KeyD&&this.controls.moveRight(.1),this.keys.KeyQ&&this.rotateCamera(t),this.keys.KeyE&&this.rotateCamera(-t)}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.group=n,this.blockGroup=new s.ZAu,this.blocks=[],this.lines=[],this.renderer=t,this.x=0,this.y=0,this.makeBlock(0,0);for(var r=0;r<9;r++)this.sizeUpX(),this.sizeUpY()}var t,n,r;return t=e,(n=[{key:"makeBlock",value:function(e,t){var n=new s._12(1,1),r=new s.Wid({color:"white"}),o=new s.Kj0(n,r),a=new s.TOt(n),i=new s.ejS(a,new s.nls({color:16777215}));i.name="".concat(e,"-").concat(t),i.rotation.x=-Math.PI/2,i.position.x=e,i.position.z=t,o.name="".concat(e,"-").concat(t),o.rotation.x=-Math.PI/2,o.receiveShadow=!0,o.position.x=e,o.position.z=t,this.lines[i.name]=i,this.blocks[o.name]=o,this.blockGroup.add(this.blocks[o.name]),this.group.add(this.lines[i.name]),this.group.add(this.blockGroup)}},{key:"deleteBlock",value:function(e,t){this.blocks["".concat(e,"-").concat(t)].geometry.dispose(),this.blocks["".concat(e,"-").concat(t)].material.dispose(),this.lines["".concat(e,"-").concat(t)].geometry.dispose(),this.lines["".concat(e,"-").concat(t)].material.dispose(),this.blockGroup.remove(this.blocks["".concat(e,"-").concat(t)]),this.group.remove(this.lines["".concat(e,"-").concat(t)]),this.renderer.renderLists.dispose()}},{key:"sizeUpX",value:function(){if(this.x<999){this.x+=1;for(var e=0;e<this.y+1;e++)this.makeBlock(this.x,e)}}},{key:"sizeUpY",value:function(){if(this.y<999){this.y+=1;for(var e=0;e<this.x+1;e++)this.makeBlock(e,this.y)}}},{key:"sizeDownX",value:function(){if(this.x>0){for(var e=0;e<this.y+1;e++)this.deleteBlock(this.x,e);this.x-=1}}},{key:"sizeDownY",value:function(){if(this.y>0){for(var e=0;e<this.x+1;e++)this.deleteBlock(e,this.y);this.y-=1}}},{key:"sizeUpArangeX",value:function(e){for(var t=0;t<e;t++)this.sizeUpX()}},{key:"sizeUpArangeY",value:function(e){for(var t=0;t<e;t++)this.sizeUpY()}},{key:"sizeDownArangeX",value:function(e){for(var t=0;t<e;t++)this.sizeDownX()}},{key:"sizeDownArangeY",value:function(e){for(var t=0;t<e;t++)this.sizeDownY()}},{key:"sizeChangeX",value:function(e){if(this.x>e){var t=this.x-e;this.sizeDownArangeX(t)}else if(this.x<e){var n=e-this.x;this.sizeUpArangeX(n)}this.x=e}},{key:"sizeChangeY",value:function(e){if(this.y>e){var t=this.y-e;this.sizeDownArangeY(t)}else if(this.y<e){var n=e-this.y;this.sizeUpArangeY(n)}this.y=e}},{key:"getCenterPos",value:function(){var e=Math.ceil(this.x/2),t=Math.ceil(this.y/2);return new s.Pa4(e,0,t)}},{key:"getSize",value:function(){return new s.FM8(this.x+1,this.y+1)}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),v=(n(9642),n(6650),n(4418)),p=n(1333);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objectData=[]}var t,n,r;return t=e,(n=[{key:"loadFile",value:function(e){var t=g(e.name.split("."),2),n=t[0],r=t[1],o=URL.createObjectURL(e);switch(r){case"glb":this.gltfLoader(n,o);break;case"fbx":this.fbxLoader(n,o)}}},{key:"gltfLoader",value:function(e,t){var n=this;(new v.E).load(t,(function(t){n.objectData[e]=t}))}},{key:"fbxLoader",value:function(e,t){var n=this;(new p.y).load(t,(function(t){n.objectData[e]=t}))}},{key:"getData",value:function(e){return this.objectData[e]?this.objectData[e]:null}},{key:"checkFileName",value:function(e){return!this.objectData[e]}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=n(8570);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="".concat((0,x.Z)()),this.mesh=new s.Kj0(new s.DvJ(1,1,1),new s.vBJ({color:"blue"})),this.mesh.name="cube#".concat(this.name),this.mesh.position.y=.5}var t,n,r;return t=e,(n=[{key:"setColor",value:function(e){}},{key:"scale",value:function(e,t,n){this.mesh.scale.set(e,t,n)}},{key:"rotate",value:function(e,t,n){this.mesh.rotation.set(e,t,n)}},{key:"move",value:function(e,t){this.mesh.position.set(e,.5,t)}}])&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;C(this,e),this.name="".concat((0,x.Z)()),this.mesh=new s.Kj0(new s._12(1,1),new s.vBJ({color:"green",side:s.ehD})),this.mesh.name="wall#".concat(this.name),this.mesh.position.y=.5,this.mesh.position.x=t||0,this.mesh.position.z=n||0,this.rotatePos=null,this.setRotatePos(),this.updatePosToRotate()}var t,n,r;return t=e,(n=[{key:"setColor",value:function(e){}},{key:"setRotatePos",value:function(){this.rotatePos={0:{x:this.mesh.position.x,z:this.mesh.position.z-.5},360:{x:this.mesh.position.x,z:this.mesh.position.z-.5},90:{x:this.mesh.position.x-.5,z:this.mesh.position.z},180:{x:this.mesh.position.x,z:this.mesh.position.z+.5},270:{x:this.mesh.position.x+.5,z:this.mesh.position.z}}}},{key:"updatePosToRotate",value:function(){var e=Math.abs(s.M8C.radToDeg(this.mesh.rotation.y));this.rotatePos&&(this.mesh.position.x=this.rotatePos[e].x,this.mesh.position.z=this.rotatePos[e].z)}},{key:"rotate",value:function(e){this.mesh.rotation.y=e}},{key:"move",value:function(e,t){this.mesh.position.set(e,.5,t)}},{key:"scale",value:function(e,t){this.mesh.scale.set(e,t)}}])&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="".concat((0,x.Z)()),!0===n.isGroup&&!0===n.isObject3D?(this.mesh=n,this.mesh.position.y=.5,this.mesh.scale.set(1,1,1),void(this.mesh.name="".concat(t,"#").concat(this.name))):n.hasOwnProperty("scene")?(this.mesh=n.scene,this.mesh.position.y=.5,this.mesh.scale.set(1,1,1),void(this.mesh.name="".concat(t,"#").concat(this.name))):void 0}var t,n,r;return t=e,(n=[{key:"rotate",value:function(e){this.mesh.rotation.y=e}},{key:"move",value:function(e,t){this.mesh.position.set(e,.5,t)}},{key:"scale",value:function(e,t){this.mesh.scale.set(e,t)}}])&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objectArray=[],this.meshArray=[],this.group=t,this.camera=n,this.floor=o,this.meshCount=0,this.canvas=r,this.cameraCenterRay=new s.iMs}var t,n,r;return t=e,n=[{key:"raycastingSet",value:function(){this.cameraCenterRay.setFromCamera(new s.FM8(0,0),this.camera)}},{key:"centerRayCasting",value:function(){this.raycastingSet();var e=this.cameraCenterRay.intersectObjects(this.floor.blockGroup.children),t=null;if(e.length>0){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{for(r.s();!(n=r.n()).done;){t=n.value.object;break}}catch(e){r.e(e)}finally{r.f()}}if(!t)return new s.FM8(0,0);var o=P(t.name.split("-"),2),a=o[0],i=o[1];return new s.FM8(a,i)}},{key:"createCircle",value:function(){}},{key:"createBox",value:function(){var e=this.centerRayCasting(),t=new I;t.move(e.x,e.y),this.objectArray[t.name]=t,this.meshArray[t.name]=t.mesh,this.group.add(t.mesh)}},{key:"createWall",value:function(){var e=this.centerRayCasting(),t=new M(e.x,e.y);t.updatePosToRotate(),this.objectArray[t.name]=t,this.meshArray[t.name]=t.mesh,this.group.add(t.mesh)}},{key:"createObject",value:function(e,t){var n=t.getData(e);if(n){var r=new B(e,n),o=this.centerRayCasting();r.move(o.x,o.y),this.objectArray[r.name]=r,this.meshArray[r.name]=r.mesh,this.group.add(r.mesh)}}}],n&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=e.obj,n=R((0,r.useState)(null),2),o=n[0],a=n[1];return(0,r.useEffect)((function(){if(a(t.mesh.name.split("#")[0]),"wall"!==o){t.mesh.rotation.reorder("YXZ");var e=document.getElementById("xr-slider"),n=document.getElementById("xr"),r=document.getElementById("yr-slider"),i=document.getElementById("yr"),l=document.getElementById("zr-slider"),c=document.getElementById("zr");e.value=s.M8C.degToRad(t.mesh.rotation.x),n.value=s.M8C.degToRad(t.mesh.rotation.x),r.value=s.M8C.degToRad(t.mesh.rotation.y),i.value=s.M8C.degToRad(t.mesh.rotation.y),l.value=s.M8C.degToRad(t.mesh.rotation.z),c.value=s.M8C.degToRad(t.mesh.rotation.z)}else{t.mesh.rotation.reorder("YXZ"),document.getElementById("yr-slider").value=s.M8C.radToDeg(t.mesh.rotation.y)}}),[t]),r.createElement("div",{className:"bg-red-100 items-center"},r.createElement("div",{className:"pt-3 pb-2 font-bold"},r.createElement("h3",null,"Rotate")),"wall"===o?r.createElement("div",{className:"flex flex-row mb-2"},r.createElement("input",{type:"range",id:"yr-slider",min:"0",max:"360",step:"90",className:"bg-gray-100 h-5 outline-1 ml-2",onInput:function(e){var n=document.getElementById("yr-slider"),r=parseInt(n.value,10);t.rotate(s.M8C.degToRad(r)),t.updatePosToRotate()}})):r.createElement("div",{className:"flex flex-col"},r.createElement("div",{className:"flex flex-row mt-2 mb-2"},r.createElement("input",{type:"range",id:"xr-slider",min:"0",max:"359",className:"bg-gray-100 h-5 outline-1 ml-2",onInput:function(e){var n=document.getElementById("xr-slider"),r=document.getElementById("xr");r.value=n.value;var o=parseInt(r.value,10);t.mesh.rotation.x=s.M8C.degToRad(o)}}),r.createElement("input",{id:"xr",className:"w-10",placeholder:"0",onChange:function(e){var n=document.getElementById("xr-slider"),r=document.getElementById("xr");n.value=r.value;var o=parseInt(r.value,10);t.mesh.rotation.x=s.M8C.degToRad(o)}})),r.createElement("div",{className:"flex flex-row mb-2"},r.createElement("input",{type:"range",id:"yr-slider",min:"0",max:"359",className:"bg-gray-100 h-5 outline-1 ml-2",onInput:function(e){var n=document.getElementById("yr-slider"),r=document.getElementById("yr");r.value=n.value;var o=parseInt(r.value,10);t.mesh.rotation.y=s.M8C.degToRad(o)}}),r.createElement("input",{id:"yr",className:"w-10",placeholder:"0",onChange:function(e){var n=document.getElementById("yr-slider"),r=document.getElementById("yr");n.value=r.value;var o=parseInt(r.value,10);t.mesh.rotation.y=s.M8C.degToRad(o)}})),r.createElement("div",{className:"flex flex-row mb-2"},r.createElement("input",{type:"range",id:"zr-slider",min:"0",max:"359",className:"bg-gray-100 h-5 outline-1 ml-2",onInput:function(e){var n=document.getElementById("zr-slider"),r=document.getElementById("zr");r.value=n.value;var o=parseInt(r.value,10);t.mesh.rotation.z=s.M8C.degToRad(o)}}),r.createElement("input",{id:"zr",className:"w-10",placeholder:"0",onChange:function(e){var n=document.getElementById("zr-slider"),r=document.getElementById("zr");n.value=r.value;var o=parseInt(r.value,10);t.mesh.rotation.z=s.M8C.degToRad(o)}}))))},F=function(e){var t=e.obj;return(0,r.useEffect)((function(){var e=document.getElementById("xs-slider"),n=document.getElementById("xs"),r=document.getElementById("ys-slider"),o=document.getElementById("ys"),a=document.getElementById("zs-slider"),i=document.getElementById("zs");e.value=t.mesh.scale.x,n.value=t.mesh.scale.x,r.value=t.mesh.scale.y,o.value=t.mesh.scale.y,a.value=t.mesh.scale.z,i.value=t.mesh.scale.z}),[]),r.createElement("div",{className:"bg-red-100 items-center"},r.createElement("div",{className:"pt-3 pb-2 font-bold"},r.createElement("h3",null,"Scale")),r.createElement("div",{className:"flex flex-col"},r.createElement("div",{className:"flex flex-row mt-2 mb-2"},r.createElement("input",{type:"range",id:"xs-slider",min:"1",max:"100",className:"bg-gray-100 h-5 outline-1 ml-2",onInput:function(e){var n=document.getElementById("xs-slider"),r=document.getElementById("xs");r.value=n.value;var o=parseInt(r.value,10);t.mesh.scale.x=o}}),r.createElement("input",{id:"xs",className:"w-10",placeholder:"0",onChange:function(e){var n=document.getElementById("xs-slider"),r=document.getElementById("xs");n.value=r.value;var o=parseInt(r.value,10);t.mesh.scale.x=o}})),r.createElement("div",{className:"flex flex-row mb-2"},r.createElement("input",{type:"range",id:"ys-slider",min:"1",max:"100",className:"bg-gray-100 h-5 outline-1 ml-2",onInput:function(e){var n=document.getElementById("ys-slider"),r=document.getElementById("ys");r.value=n.value;var o=parseInt(r.value,10);t.mesh.scale.y=o}}),r.createElement("input",{id:"ys",className:"w-10",placeholder:"0",onChange:function(e){var n=document.getElementById("ys-slider"),r=document.getElementById("ys");n.value=r.value;var o=parseInt(r.value,10);t.mesh.scale.y=o}})),r.createElement("div",{className:"flex flex-row mb-2"},r.createElement("input",{type:"range",id:"zs-slider",min:"1",max:"100",className:"bg-gray-100 h-5 outline-1 ml-2",onInput:function(e){var n=document.getElementById("zs-slider"),r=document.getElementById("zs");r.value=n.value;var o=parseInt(r.value,10);t.mesh.scale.z=o}}),r.createElement("input",{id:"zs",className:"w-10",placeholder:"0",onChange:function(e){var n=document.getElementById("zs-slider"),r=document.getElementById("zs");n.value=r.value;var o=parseInt(r.value,10);t.mesh.scale.z=o}}))))};function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t=e.mesh,n=U((0,r.useState)(null),2),o=n[0],a=n[1];return(0,r.useEffect)((function(){a(t)}),[t]),r.createElement("div",{className:"flex flex-row bg-white h-[500px]"},o?r.createElement("div",{className:"p-2"},r.createElement("div",{className:"flex flex-col"},r.createElement("div",{className:"mt-2"},o.mesh.name.split("#")[0]),r.createElement(D,{obj:o}),r.createElement(F,{obj:o}),r.createElement("div",null,r.createElement("button",{className:"rounded outline outline-offset-2 outline-2 mb-3 w-20 mt-4",onClick:function(){t.delete()}},"delete")))):null)},X=function(e){var t=e.floor;return(0,r.useEffect)((function(){var e=document.getElementById("x"),n=document.getElementById("y");e.value=t.x+1,n.value=t.y+1}),[]),r.createElement("div",{className:"flex flex-col items-center justify-items-center h-14 bg-blue-200 rounded pl-2 w-[300px] pr-3"},r.createElement("h1",{className:"mb-1 mt-1"},"Floor"),r.createElement("div",{className:"flex flex-row"},r.createElement("div",{className:"mr-5"},"x",r.createElement("button",{id:"xPlus",className:"ml-2 w-5 h-5 bg-green-100 rounded",onClick:function(){t.sizeUpX(),document.getElementById("x").value=t.x+1}},"+"),r.createElement("button",{id:"xMinus",className:"ml-2 w-5 h-5 bg-red-100 rounded",onClick:function(){t.sizeDownX(),document.getElementById("x").value=t.x+1}},"-"),r.createElement("input",{id:"x",placeholder:"x",default:"",className:"text-center w-10 bg-gray-100 h-5 rounded outline-1 ml-2",onChange:function(e){var n=document.getElementById("x"),r=parseInt(n.value,10);r>0&&t.sizeChangeX(r-1)}})),r.createElement("div",null,"y",r.createElement("button",{id:"yPlus",className:"ml-2 w-5 h-5 bg-green-100 rounded",onClick:function(){t.sizeUpY(),document.getElementById("y").value=t.y+1}},"+"),r.createElement("button",{id:"yMinus",className:"ml-2 w-5 h-5 bg-red-100 rounded",onClick:function(){t.sizeDownY(),document.getElementById("y").value=t.y+1}},"-"),r.createElement("input",{id:"y",placeholder:"y",className:"text-center w-10 bg-gray-100 h-5 rounded outline-1 ml-2",onChange:function(e){var n=document.getElementById("y"),r=parseInt(n.value,10);r>0&&t.sizeChangeY(r-1)}}))))};n(3214);function L(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.objects,n=e.loader,o=G((0,r.useState)(["box","circle","wall"]),2),a=o[0],i=o[1];function l(e){"box"===e.target.id?t.createBox():"circle"===e.target.id?t.createCircle():"wall"===e.target.id?t.createWall():t.createObject(e.target.id,n)}return r.createElement("div",{className:"flex flex-col w-[150px] pb-5 bg-green-200 items-center pt-5 "},r.createElement("label",{className:"w-[100px] h-[100px] bg-white rounded-lg text-7xl text-center content-center items-center cursor-pointer pb-3 pt-3"},"+",r.createElement("input",{type:"file",id:"upload",className:"hidden",onChange:function(e){e.preventDefault();var t=document.getElementById("upload"),r=t.files[0].name.split(".")[0];n.checkFileName(r)&&(n.loadFile(t.files[0]),i([r].concat(L(a))))}})),a.map((function(e,t){return r.createElement("div",{id:e,className:"w-[100px] h-[100px] text-center align-middle bg-white rounded-lg cursor-pointer mb-3 mt-3",onClick:l},e)})))};function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=null,q=null,Q=null,V=null,ee=null,te=null,ne=null,re=null,oe=null,ae=function(){var e,t=$((0,r.useState)(!1),2),n=t[0],o=t[1],a=$((0,r.useState)(null),2),i=(a[0],a[1]);function l(){ee.updateController(te.objectArray),q.render(Q,V),q.setAnimationLoop(l)}return window.addEventListener("resize",(function(){V&&q&&Q&&(V.left=-window.innerWidth/window.innerHeight,V.right=window.innerWidth/window.innerHeight,V.top=1,V.bottom=-1,V.updateProjectionMatrix(),q.setSize(window.innerWidth,window.innerHeight),q.render(Q,V))})),(0,r.useEffect)((function(){n||function(){_=document.getElementById("WorldMap"),(q=new s.CP7({canvas:_,antialias:!0})).setSize(window.innerWidth,window.innerHeight),q.setPixelRatio(window.devicePixelRatio>1?2:1),q.shadowMap.enabled=!0,q.shadowMap.type=s.ntZ,re=new E,(ne=new s.ZAu).name="renderGroup",Q=new s.xsS,V=new s.iKG(-window.innerWidth/window.innerHeight,window.innerWidth/window.innerHeight,1,-1,-1e3,1e3);var e=(oe=new y(q,ne)).getCenterPos();V.position.set(e.x,5,e.z),V.rotation.reorder("YXZ"),V.rotation.x=s.M8C.degToRad(-45),V.rotation.y=s.M8C.degToRad(-45),V.zoom=.1,V.updateProjectionMatrix(),Q.add(V);var t=new s.Mig("white",.8);Q.add(t),ee=new d(V,q.domElement,_,ne,oe,i),te=new O(ne,V,_,oe),Q.add(ne),l(),o(!0)}()}),[]),r.createElement(r.Fragment,null,n?r.createElement(r.Fragment,null,r.createElement("div",{className:"relative flex flex-row"},r.createElement("div",{className:"absolute left-0 top-0"},r.createElement(X,{floor:oe}),r.createElement(W,{mesh:null===(e=ee)||void 0===e?void 0:e.selectMesh})),r.createElement("div",{className:"absolute top-0 right-0"},r.createElement(H,{objects:te,loader:re})))):null,r.createElement("canvas",{id:"WorldMap"}))},ie=function(){return r.createElement("div",null,"NotFound")},le=n(1081);var se=function(){return r.createElement("div",{className:"App"},r.createElement("header",{className:"App-header"}),r.createElement(le.Z5,null,r.createElement(le.AW,{path:"/",element:r.createElement(l,null)}),r.createElement(le.AW,{path:"edit",element:r.createElement(ae,null)}),r.createElement(le.AW,{path:"*",element:r.createElement(ie,null)})))},ce=n(9902);o.createRoot(document.getElementById("root")).render(r.createElement(r.StrictMode,null,r.createElement(ce.VK,null,r.createElement(se,null))))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=function(t,n,o,a){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],a=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[s])}))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={179:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,i=n[0],l=n[1],s=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(s)var u=s(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunkfront=self.webpackChunkfront||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[349],(function(){return r(8363)}));o=r.O(o)}();